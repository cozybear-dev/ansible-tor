---
# - hosts: tor-fleet-managed
- hosts: setup
  vars:
    contact_info: "email:tor[]shadowbrokers.eu url:shadowbrokers.eu proof:dns-rsa btc:bc1qu9m2sy836pmyku0t3vnmpjxfjds8p2x5psyl6y ciissversion:2"
    tor_contact_email: tor@shadowbrokers.eu
    hostname: "{{ inventory_hostname }}"
    ipv6_enabled: "{{ ipv6_enabled_conf | default('yes') }}"
    tor_exit_enabled: "{{ tor_exit_enabled_conf | default('no') }}"
    kilobytes_burst: "{{ kilobytes_burst_conf | default('') }}"
    kilobytes_rate: "{{ kilobytes_rate_conf | default('') }}"
    tor_family: > 
      84FA05E6A80EBE36BD84A51705C467FA98188D4A,
      F59D3D313A027703E51DC7DF793F2ED106C2E372,
      C7A51E46740C15DEC0535AF5560A1919CE6E5758,
      034ED155E6DA8277BC7F294896BFD7013D7BD7B0,
      014326416058DCFD0965167026CBEF647409A000,
      B829A49405A9DA5BD2E199F6E83E638CA233BC3C,
      2F76402F04EE7AC80207A4B3B525B235673952AE,
      AC7BDB39F81C4B364EA50B12B51C77C7A131EA7C,
      EBD7520D6CA3CD325ADE5C3C802A7DAFA0BA6C71,
      A3BC09219C2351376412D8736C7CAEE4A1639E3B,
      2AB6D4CE7A4D46ADA4F21C537A05A68DE088280B,
      DDF458ADF897A5EB0B894023C084B3C5B2F3B15B,
      63A976C6BE797BDFE0E367D1910A381F0E0C0891,
      3B432139835ADDA359F09AC63D65A86360EFD409,
      5EAA3069C8655BD6396F313BAD59E779B347C53C,
      FC8AD114F816FB8CF20D19E4E5AFFD0D6780F3DF,
      2A134CF4E3CC5C7F77F331177791843794B96068,
      3EBDF7359190ACC0E23E5BA3B9C046668DF85114,
      EE50AAEA83AA7EDAF0A35E4E8EA4976483ABCCDD,
      8F013AB2708FB36FA5F9594DC97701E64545ADEF,
      8B31226353E33A49D43A0140F05AA056337E8578,
      D1D4115C77FD8C5F8BBD1CFA8F938F0143AE8E5B,
      AA5C46F66CB5863FA379F18081F9BEDC130AD601,
      E9EA2D5287B668498026E07289482E3FD50C1047,
      7B1E489F721DF140436AA42BD513DFB3BD40DF5E,
      5B0BFE295F857E47D7C2A420260A9E1A61B0044F,
      C80CC578B912CEDFCD8250296341FDDC44B2DD18,
      ED3F06DC5FFD8EBC732920E8F044B132AE6C3B80,
      DFDAF22D0F96265C5A1FB0C319ECD4D532339DE8,
      D69801BF161F4A15D45B78ED02C48DBE9993CFC1,
      9CD8AC434F90DC1AA7E18D019A34ACEB218E9EA5,
      616D768A421DD4E6F4BB55BBDCB5B5DE6E7E7079,
      B9C5243087CF69B6A57A8318B312B79F19D6D594
  roles:
    - setup-manjaro-user
    - setup-apparmor
    - restrict-kernel
    - setup-dns
    - install-and-configure-tor
    - install-netdata-agent
    - set-ssh-config #any reboots after this role, will fail during very first setup with root user
    - ip-tables
    - get-node-hash
